/*******************************************************************
 * File:        device
 * Purpose:     device interfacing
 * Author:      Gerph
 ******************************************************************/

#ifndef MBR_DEVICE_H
#define MBR_DEVICE_H

#include "BlockDevices.h"
#include "GUID.h"

typedef struct gpt_device_s {
  struct gpt_device_s *prev;
  struct gpt_device_s *next;
  device_info_t info;
  int parent_id;
  int device_id;
  uint64_t offset;
  guid_t type_guid;
  guid_t part_guid;
} gpt_device_t;

/*************************************************** Gerph *********
 Function:      device_open
 Description:   Open the connection to a device
                If we were successful, device_alive will return true.
                If we're not, we won't get registered.
 Parameters:    device -> the device data
 Returns:       none
 ******************************************************************/
void device_open(gpt_device_t *device);


/*************************************************** Gerph *********
 Function:      device_close
 Description:   Close the connection to a device
                From here on, device_alive will report false.
 Parameters:    device -> the device data
 Returns:       none
 ******************************************************************/
void device_close(gpt_device_t *device);

/*************************************************** Gerph *********
 Function:      device_read
 Description:   Read the current speed
 Parameters:    device -> the device data
 Returns:       current speed
 ******************************************************************/
int device_read(gpt_device_t *device);

/*************************************************** Gerph *********
 Function:      device_setspeed
 Description:   Set the speed for the device
 Parameters:    device -> the device data
                speed = new speed to select
 Returns:       current speed
 ******************************************************************/
int device_write(gpt_device_t *device);

#endif // MBR_DEVICE_H
